---
title: "Data Cleaning for AGB Analysis (Spring 2022)"
author: "Aubrey Knier & Mishka Malinowski"
date: "3/23/2022"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
getwd()

library(tidyverse)
#install.packages("janitor")
library(janitor)

#load data
AGB.sp22.data.raw <- read.csv("Data_USE_ME.csv")
clean.spp.list <- read.csv("clean_spp_list.csv") %>%
  select(Species)
```   

```{r}
#using plots: "DF3B", "DF5A", "DF5B", "DF6A", "DF6B" and "IF2A"

#exploring groups within project and plot columns
unique(AGB.sp22.data.raw$Project)
unique(AGB.sp22.data.raw$Plot)

#filter data for only our 6 plots
AGB.sp22.data <- AGB.sp22.data.raw %>%
  unite("Proj.Plot", Project:Plot, remove=F) %>%
    filter(Proj.Plot %in% c("DF_3B", "DF_5A", "DF_5B", "DF_6A", "DF_6B", "IF_2A"))

#check row names of Proj.Plot
unique(AGB.sp22.data$Proj.Plot) #only data for 6 plots in data frame

#subset data
colnames(AGB.sp22.data)
AGB.sp22.data.subset <- AGB.sp22.data %>%
  select(E, Date..dd.mm.yyyy..1,Proj.Plot,Grid,TAG_SUM, Plant_tag, X_coord, Y_coord, Tool, POM, DBH..mm., Height..meters.,Type_Field, Note_Field, ID, Treatment)
colnames(AGB.sp22.data.subset)
##QUESTION FOR VINCENT - What is treatment? 

#column names 
colnames(AGB.sp22.data.subset) = c("Data_Collection_Season", "Date", "Proj.Plot", "Grid", "TAG_SUM", "Plant_tag", "X_coord", "Y_Coord", "Tool", "POM", "DBH_mm", "Height_m", "Veg_Type", "Notes", "ID", "Treatment")

#Check Date Column 
class(AGB.sp22.data.subset$Date)
AGB.sp22.data.subset$Date <- as.Date(AGB.sp22.data.subset$Date,
                                     format = "%d/%m/%Y")
class(AGB.sp22.data.subset$Date)

#Checking through columns 
#Data_Collection_Season
unique(AGB.sp22.data.subset$Data_Collection_Season)
###QUESTION FOR VINCENT - what is the difference between Winter_2021 and Nov_Dec_2021? can you explain these data collection periods more?
unique(AGB.sp22.data.subset$Date)
summary(AGB.sp22.data.subset$Date)
### Why are there NAs for Date? 

#Proj.Plot
unique(AGB.sp22.data.subset$Proj.Plot)

#Grid
unique(AGB.sp22.data.subset$Grid)
#Found H7/J8 which is wrong 
class(AGB.sp22.data.subset$Grid)
#AGB.sp22.data.subset %>% filter_all(any_vars(. %in% c('H7/J8')))
sum(AGB.sp22.data.subset$Grid == "H7/J8")
AGB.sp22.data.subset$Grid[AGB.sp22.data.subset$Grid %in% c("H7/J8")] <- "H7/I8"

#TAG_SUM
unique(AGB.sp22.data.subset$TAG_SUM)
#This will be difficult to work through... anddd....I worry about H7/J8


#compare species ID in dataframe with reference species list. 1=match, 0=no match
AGB.sp22.data$Spp.match <- ifelse(AGB.sp22.data$ID %in% clean.spp.list, 1,0)

unique(AGB.sp22.data$Spp.match)
```
